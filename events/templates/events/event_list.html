{% extends "base.html" %}

{% block title %}Events{% endblock title %}

{% block content %}
    <!-- Page Header -->
    <header class="text-center mb-10 border-b border-gray-200 pb-6">
        <h1 class="text-5xl font-extrabold text-loop-dark-violet mb-3 tracking-tighter">
            {{ page_title|default:"Community Events" }}
        </h1>
        <p class="text-xl text-gray-500 max-w-3xl mx-auto">
            Join our upcoming sessions or check out highlights from past events.
        </p>
    </header>

    <!-- HTMX Filter Buttons -->
    <div class="flex flex-wrap justify-center space-x-4 mb-10" id="event-filters">
        
        <!-- Filter Button 1: All Events (Default) -->
        <button 
            hx-get="{% url 'events:event_list' %}?filter=ALL" 
            hx-target="#event-list-container" 
            hx-swap="innerHTML"
            class="py-2 px-6 rounded-full font-semibold text-base transition duration-300 shadow-md 
                   {% if not request.GET.filter or request.GET.filter == 'ALL' %}bg-loop-indigo text-white{% else %}bg-gray-200 text-gray-700 hover:bg-loop-accent hover:text-white{% endif %}">
            All Events
        </button>

        <!-- Filter Button 2: Upcoming Events -->
        <button 
            hx-get="{% url 'events:event_list' %}?filter=UPCOMING" 
            hx-target="#event-list-container" 
            hx-swap="innerHTML"
            class="py-2 px-6 rounded-full font-semibold text-base transition duration-300 shadow-md 
                   {% if request.GET.filter == 'UPCOMING' %}bg-loop-indigo text-white{% else %}bg-gray-200 text-gray-700 hover:bg-loop-accent hover:text-white{% endif %}">
            Upcoming
        </button>

        <!-- Filter Button 3: Past Events -->
        <button 
            hx-get="{% url 'events:event_list' %}?filter=PAST" 
            hx-target="#event-list-container" 
            hx-swap="innerHTML"
            class="py-2 px-6 rounded-full font-semibold text-base transition duration-300 shadow-md 
                   {% if request.GET.filter == 'PAST' %}bg-loop-indigo text-white{% else %}bg-gray-200 text-gray-700 hover:bg-loop-accent hover:text-white{% endif %}">
            Past Events
        </button>
    </div>
    
    <!-- HTMX Target Container -->
    <div id="event-list-container">
        {% include 'events/event_cards.html' %}
    </div>

{% endblock content %}