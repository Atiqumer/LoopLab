{% extends "base.html" %}

{% block title %}Projects{% endblock title %}

{% block content %}
    <!-- Page Header -->
    <header class="text-center mb-10 border-b border-gray-200 pb-6">
        <h1 class="text-5xl font-extrabold text-loop-dark-violet mb-3 tracking-tighter">
            {{ page_title|default:"Community Projects Showcase" }}
        </h1>
        <p class="text-xl text-gray-500 max-w-3xl mx-auto">
            A dynamic showcase of the best work developed by our community members during the tech task.
        </p>
    </header>

    <!-- HTMX Filter Buttons -->
    <div class="flex flex-wrap justify-center space-x-4 mb-10" id="project-filters">
        
        {% comment %} Assume 'categories' and 'active_category' are passed from the view {% endcomment %}
        
        <!-- Button Group for Filtering: ALL -->
        <button 
            hx-get="{% url 'projects:project_list' %}?category=ALL" 
            hx-target="#project-cards-container" 
            hx-swap="innerHTML"
            class="py-2 px-6 rounded-full font-semibold text-base transition duration-300 transform hover:scale-[1.05] 
                   {% if active_category == 'ALL' %}bg-loop-indigo text-white shadow-lg{% else %}bg-gray-200 text-gray-700 hover:bg-loop-accent hover:text-white shadow-md{% endif %}">
            ALL PROJECTS
        </button>

        {% comment %} Assuming categories = ['FRONTEND', 'BACKEND', 'FULLSTACK', 'DESIGN'] {% endcomment %}
        {% for category in categories %}
            <button 
                hx-get="{% url 'projects:project_list' %}?category={{ category }}" 
                hx-target="#project-cards-container" 
                hx-swap="innerHTML"
                class="py-2 px-6 rounded-full font-semibold text-base transition duration-300 transform hover:scale-[1.05]
                       {% if active_category == category %}bg-loop-indigo text-white shadow-lg{% else %}bg-gray-200 text-gray-700 hover:bg-loop-accent hover:text-white shadow-md{% endif %}">
                {{ category }}
            </button>
        {% endfor %}
        
    </div>
    
    <!-- Project Grid: HTMX Target Area -->
    <div id="project-cards-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 p-4">
        {% include 'projects/project_cards.html' %}
    </div>

{% endblock content %}